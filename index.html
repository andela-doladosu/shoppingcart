<!DOCTYPE html>
<html>
<head>
    <link type="text/css" rel="stylesheet" href="style.css"/>
  <title>Beauty Shop</title>
</head>
<body>
  <div id="header">
    <img src="images/logo.jpg">
    <p><em><strong>Cool brands. Hot prices!</strong></em></p>
    <div id="navbar">
        <ul>
          <li><a href="welcome.html"> Sign In/Register   </a></li>
          <li><a href="about_us.html"> About Us   </a></li>
          <li><a href="contact.html"> Contact   </a></li>
        </ul>
      </div>    
  </div>
  </head>
  <div class="left">
    <table id="products">
      <thead>
        <th colspan="3">Products</th>
      </thead>
        <tr>
          <td id="1" data-price="5000"><img src="images/macpowder.jpg"></br>M.A.C Powder </br>N5000</td>
          <td id="2" data-price="3000"><img src="images/urbandecay eyeshadow.jpg"></br>Urban Decay Eyeshadow </br>N3000</td>
          <td id="3" data-price="800"><img src="images/blinceyeliner_pencil.jpg"></br>Blinc Eyeliner Pencil </br>N800</td>
        </tr>
        <tr>
          <td id="4" data-price="10000"><img src="images/brushes.jpg"></br>Sigma Beauty Brushes</br> N10000</td>
          <td id="5" data-price="3500"><img src="images/lipstick.jpg"></br>Black|Up Lipstick </br>N3500</td>
          <td id="6" data-price="4000"><img src="images/inglotblush.jpg"></br>Inglot Blush</br> N4000</td>
        </tr>
        <tr>
          <td id="7" data-price="1500"><img src="images/mascara.jpg"></br>Maybelline Mascara </br>N1500</td>
          <td id="8" data-price="7000"><img src="images/blackupfoundation.jpg"></br>Black|Up Foundation </br>N7000</td>
          <td id="9" data-price="1200"><img src="images/eyeprimer.jpg"></br>Mary Kay Eye primer </br>N1200</td>
        </tr>                  
    </table>
    </div>
    <section id="cart" class="right">
      <h1>Cart</h1>
      <ul>
      </ul>       
    </section>
    <section id="order" class="right">
      <p>Order Total:&nbsp;<span id="total"></span></p>
      <button id="checkout"><a href="checkout.html">Checkout</a></button>    
    </section>
    <section id="tips">
      <img id="myPhoto" src="images/tips5.jpg" alt="images/tips4.jpg"/>
    </section>
    


    <script type="text/javascript">

    var myImage= document.getElementById("myPhoto");
    var imageArray= ["images/tips5.jpg", "images/tips4.jpg", "images/tips7.jpg"];
    var imagIndex=0;
    function changeImage(){
      myPhoto.setAttribute("src", imageArray[imagIndex]);
      imagIndex++;
      if(imagIndex>=imageArray.length){
        imagIndex=0;
      }
    }
    var intervalHandler=setInterval(changeImage,2000);
    myPhoto.onclick=function(){
      clearInterval(intervalHandler);
    }
    function addEvent(element, event, delegate ) {
      if (typeof (window.event) != 'undefined' && element.attachEvent)
        element.attachEvent('on' + event, delegate);
      else 
        element.addEventListener(event, delegate, false);
    }
    var items = document.querySelectorAll("#products td");
    var cart = document.querySelectorAll("#cart")[0];
    var total = 0;

    for (var i = 0; i < items.length; i++) {
      var item = items[i];
      item.setAttribute("draggable", "true");
      addEvent(item, 'dragstart', onDrag);
    };
    function onDrag(event) {
      event.dataTransfer.effectAllowed = "move";
      event.dataTransfer.dropEffect = "move";
      var target = event.target || event.srcElement;
      event.dataTransfer.setData("text", target.id);
    }

    function onDragOver(event) {
      if(event.preventDefault) event.preventDefault();
        if (event.stopPropagation)
          event.stopPropagation();
        else
          event.cancelBubble = true;
        return false;
    }

    function onDrop(event) {
      if(event.preventDefault) event.preventDefault();
        if (event.stopPropagation) event.stopPropagation();
        else event.cancelBubble = true;
        
        var id = event.dataTransfer.getData("text");
        var item = document.getElementById(id);    
        var thecart = document.querySelectorAll("#cart ul")[0];
        var listitem = document.createElement("li");
        listitem.innerHTML = item.innerHTML;
        thecart.appendChild(listitem);
        var price = item.getAttribute("data-price");
        total = total + Number(price);
         
        var spantotal = document.getElementById('total');
        spantotal.innerHTML = " N" + total ;
         /*     
        var exists = document.querySelectorAll("#cart ul li[data-id='" + id + "']");
        
        if(exists.length > 0){
          updateCartItem(exists[0]);
        } else {
          addCartItem(item, id);
        }
        
        updateCart();
        */
        
        return false;
      }

      addEvent(cart, 'dragover', onDragOver);
      addEvent(cart, 'drop', onDrop);

    </script>
  
</body>
</html>